<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>Pickleball Swipe Scorer</title>
  <style>
    :root{
      --bg:#0c0c0f; --muted:#6b7280; --panel:#111218; --blue:#3ba3ff; --red:#ff4d4d; --white:#ffffff; --green:#39e075; --divider:#23242c;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:var(--bg);color:#e5e7eb;font-family:ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans"}
    .app{height:100%;display:flex;flex-direction:column;}

    .top{padding:18px 14px 6px;}
    .names{display:grid;grid-template-columns:1fr 1fr;align-items:center;gap:8px;opacity:.7;font-weight:700;letter-spacing:.3px}
    .names .cell{display:flex;align-items:center;gap:8px}
    .dot{width:10px;height:10px;border-radius:50%;background:transparent;border:2px solid transparent}
    .dot.active{background:var(--green);box-shadow:0 0 0 6px rgba(57,224,117,.18)}
    .divider{height:36px;width:2px;background:var(--divider);margin:4px auto;border-radius:99px}

    .board{flex:1;display:flex;justify-content:center;align-items:center;position:relative;}
    .scores{display:flex;align-items:center;gap:22px}
    .big{font-size:120px;line-height:1;font-weight:900;letter-spacing:2px}
    .big.blue{color:var(--blue)}
    .big.red{color:var(--red)}
    .big.white{color:var(--white);font-size:96px;opacity:.9}
    .dotSep{font-size:80px;opacity:.25}

    .pad{position:absolute;left:0;right:0;display:flex;justify-content:center;align-items:center;color:#9ca3af;user-select:none}
    .pad.top{top:0;height:30%;}
    .pad.bottom{bottom:0;height:30%;}
    .chev{width:0;height:0;border-left:14px solid transparent;border-right:14px solid transparent;opacity:.9;filter:drop-shadow(0 4px 16px rgba(0,0,0,.4))}
    .chev.red{border-bottom:18px solid var(--red);}
    .chev.blue{border-top:18px solid var(--blue);}

    .hint{position:absolute;left:50%;transform:translateX(-50%);bottom:14px;font-size:12px;color:#9ca3af;opacity:.7}

    .bottom{padding:10px 16px 18px;display:flex;justify-content:space-between;align-items:center;gap:8px}
    .mini{display:grid;grid-template-columns:1fr auto 1fr;align-items:center;gap:8px;opacity:.85}
    .mini .name{font-weight:700}
    .btn{background:#161823;border:1px solid #2a2d3a;color:#d1d5db;padding:10px 14px;border-radius:12px;font-weight:700;cursor:pointer}
    .btn:active{transform:translateY(1px)}
    .ghost{background:transparent}
    .tap{cursor:pointer;transition:opacity .2s}
    .tap:hover{opacity:.9}
  </style>
</head>
<body>
  <div class="app" id="app">
    <div class="top">
      <div class="names">
        <div class="cell"><span class="dot" id="dotA1"></span><span class="tap" id="nameA1">Awais</span></div>
        <div class="cell" style="justify-content:end"><span class="tap" id="nameA2">Haris</span><span class="dot" id="dotA2"></span></div>
      </div>
      <div class="divider"></div>
    </div>

    <div class="board" id="board">
      <div class="pad top" id="padTop">
        <div class="chev red"></div>
      </div>

      <div class="scores">
        <div class="big blue" id="scoreA">0</div>
        <div class="dotSep">·</div>
        <div class="big red" id="scoreB">0</div>
        <div class="dotSep">·</div>
        <div class="big white" id="serverNum">2</div>
      </div>

      <div class="pad bottom" id="padBottom">
        <div class="chev blue"></div>
      </div>
      <div class="hint">上滑紅箭頭：B隊或交球 ｜ 下滑藍箭頭：A隊或交球</div>
    </div>

    <div class="bottom">
      <div class="mini" style="width:56%">
        <div class="cell"><span class="dot" id="dotB1"></span><span class="tap" id="nameB1">Jov</span></div>
        <div style="height:36px;width:2px;background:var(--divider);border-radius:99px"></div>
        <div class="cell" style="justify-content:end"><span class="tap" id="nameB2">Sana</span><span class="dot active" id="dotB2"></span></div>
      </div>
      <div style="display:flex;gap:8px">
        <button class="btn ghost" id="swapServe">交換發球方</button>
        <button class="btn" id="reset">重置</button>
      </div>
    </div>
  </div>

  <script>
    const state = {
      A: 0,
      B: 0,
      servingTeam: 'B',
      serverNumber: 2,
      serverSpot: 'B2',
    };

    const el = id=>document.getElementById(id);
    const scoreA=el('scoreA'),scoreB=el('scoreB'),serveNum=el('serverNum');
    const dots={A1:el('dotA1'),A2:el('dotA2'),B1:el('dotB1'),B2:el('dotB2')};

    function render(){
      scoreA.textContent=state.A;
      scoreB.textContent=state.B;
      serveNum.textContent=state.serverNumber;
      for(const k in dots) dots[k].classList.remove('active');
      dots[state.serverSpot]?.classList.add('active');
    }

    function pointTo(team){
      if(team==='A') state.A++; else state.B++;
      render();
    }

    function loseRally(){
      if(state.servingTeam==='B'){
        if(state.serverNumber===1){
          state.serverNumber=2;
          state.serverSpot='B2';
        }else{
          state.servingTeam='A';
          state.serverNumber=1;
          state.serverSpot='A1';
        }
      }else{
        if(state.serverNumber===1){
          state.serverNumber=2;
          state.serverSpot='A2';
        }else{
          state.servingTeam='B';
          state.serverNumber=1;
          state.serverSpot='B1';
        }
      }
      render();
    }

    function reset(){
      state.A=0;state.B=0;state.servingTeam='B';state.serverNumber=2;state.serverSpot='B2';render();
    }

    function attachSwipe(el,direction,cb){
      let startY=null;let active=false;const th=40;
      el.addEventListener('touchstart',e=>{startY=e.touches[0].clientY;active=true;});
      el.addEventListener('touchmove',e=>{if(!active)return;const dy=e.touches[0].clientY-startY;if(direction==='up'&&dy<-th){active=false;cb();}if(direction==='down'&&dy>th){active=false;cb();}});
      el.addEventListener('touchend',()=>{active=false;});
    }

    attachSwipe(el('padTop'),'up',()=>{
      if(state.servingTeam==='B') loseRally(); else pointTo('B');
    });
    attachSwipe(el('padBottom'),'down',()=>{
      if(state.servingTeam==='A') loseRally(); else pointTo('A');
    });

    el('swapServe').addEventListener('click',()=>{
      state.servingTeam=state.servingTeam==='A'?'B':'A';
      state.serverNumber=1;
      state.serverSpot=state.servingTeam==='A'?'A1':'B1';
      render();
    });

    el('reset').addEventListener('click',reset);
    render();
  </script>
</body>
</html>
